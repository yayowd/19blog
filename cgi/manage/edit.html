<!--
This file is part of the 19blog project.
19blog is a simple blog site system.
Copyright (C) 2020  The 19blog Authors.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='UTF-8'>
	<title>Edit Article</title>
	<style type='text/css'>
        * {
            padding: 0;
            margin: 0;
        }

        html {
            height: 100%;
        }

        body {
            height: 100%;
        }

        form {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .block {
            background-color: ghostwhite;
            border: bisque dashed 1px;
            padding: 9px 15px;
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        .label {
            text-align: right;
            padding-right: 19px;
            width: 59px;
        }

        .author {
            color: dimgray;
        }

        .text {
            flex: 1;
            font-size: 14pt;
            line-height: 1.5;
            padding: 9px;
        }

        input.text {
            font-weight: bold;
            letter-spacing: 3px;
        }

        textarea.text {
            align-self: stretch;
            margin: 9px 0;
            letter-spacing: 2px;
        }

        .content {
            flex: 1;
        }

        .toolbar {
            background-color: #cecef8;
            text-align: center;
            padding: 9px;
        }

        .button {
            width: 99px;
            height: 33px;
        }

        .remove {
            background-color: black;
            color: white;
        }
	</style>
	<script>
        let changed = false

        function onChange() {
            changed = true
        }

        function onReset() {
            changed = false
        }

        function onClose() {
            if (!changed || confirm("The form has not been saved, Are you sure to close?")) {
                window.close()
            }
        }

        function onSubmit() {
            // if (!changed) {
            //     alert("The form is not modified, no need to save.")
            //     return false
            // }
            return changed
        }

        function onRemove() {
            if (confirm("Are you sure remove this blog?")) {
                window.open('remove?id=$id', '_self')
            }
        }
	</script>
</head>
<body>
<form method='post' enctype='multipart/form-data' onchange='onChange()' onreset='onReset()' onsubmit='return onSubmit()'>
	<input type='hidden' name='id' value='$id'>
	<div class='block'>
		<span class='label'>Author:</span>
		<span class='author'>$REMOTE_USER</span>
	</div>
	<div class='block'>
		<span class='label'>Title:</span>
		<input class='text' type='text' name='title' value='$title' required>
	</div>
	<div class='block content'>
		<span class='label'>Content:</span>
		<textarea class='text' name='content' required>$content</textarea>
	</div>
	<div class='toolbar'>
		<input class='button' type='submit' value='Save'>
		<input class='button' type='button' value='Close' onclick='onClose()'>
		<input class='button' type='reset' value='Reset'>
		$rmbtn
	</div>
</form>
</body>
</html>
